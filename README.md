[2025_lab] <br>
:four_leaf_clover: <strong>프로젝트명</strong> <br>
<strong>THUMBNAILGEN - </strong> AI 기반 동영상 콘텐츠 썸네일 자동 생성 시스템
<hr>

:four_leaf_clover: <strong>프로젝트 소개</strong> <br>
본 프로젝트는 사용자의 입력을 바탕으로 영상을 분석하고, STT(음성 인식) 및 키워드 추출, CLIP 기반의 핵심 프레임 추출 과정을 거쳐, 사용자 선호도에 맞는 
레이아웃을 구성한 뒤, 키워드 기반의 제목 이미지까지 자동으로 생성하여 최종 썸네일 이미지를 완성하는 일련의 과정을 구현한다. 이러한 자동화된 워크플로우는 
크리에이터가 영상 제작 과정에서 겪는 반복적이고 시간 소모적인 썸네일 제작 부담을 획기적으로 줄여주며, 영상의 핵심 메시지와 시각적 특징을 과학적으로 
분석하여 썸네일 품질을 크게 향상시킬 수 있다. 특히, STT와 GPT, KeyBERT, CLIP 등 최근 다방면으로 많이 활용되는 AI 기술을 융합적으로 적용함으로써, 영상의 
주제와 맥락을 심층적으로 파악하고, 시청자의 시선을 끌 수 있는 핵심 장면과 키워드를 효과적으로 도출할 수 있다. 또한, 사용자의 채널 특성과 선호도를 반영한 
맞춤형 레이아웃 및 디자인을 자동으로 적용함으로써, 크리에이터의 개성을 살리면서도 클릭률(CTR)을 높일 수 있는 최적의 썸네일을 제공한다.
<hr>

:four_leaf_clover: <strong>활용 데이터 및 API</strong> <br>
- <em> GPT API</em>: 키워드를 효과적으로 추출하는 기능, 키워드 기반 채널의 제목 스타일을 반영한 제목 생성 기능을 구현<br>
- <em>구글 클라우드 youtube_data_v3 API</em>: 입력받은 본인 채널의 uploads playlist ID를 가져오고, 이 playlist에서 최근 영상 4개의 제목을 가져오도록 하는 코드를 구현<br>
<hr>

:four_leaf_clover: <strong>구현 과정 및 결과</strong> <br><br>
데모 영상: https://www.youtube.com/shorts/fxbT2hS7IwY <br><br>
![피그마_영상_gif](https://github.com/user-attachments/assets/27fd1806-a66a-45b6-9345-b7c005a705f6)

<br><br>
<사용자 워크플로우>
<img width="882" height="413" alt="사용자 워크플로우" src="https://github.com/user-attachments/assets/c8297ed2-e69d-4838-b6f5-71a2afb2f23e" />

<br>
<주요 기능 소개>

```text
(1) 사용자 입력
 영상 업로드 및 본인 채널 주소 입력 
(2) 영상 분석
 STT를 통한 자막 추출 및 GPT API (또는 KeyBERT)를 이용하여 추출된 키워드를 
바탕으로 CLIP에서 중요한 프레임 추출 
(3) 레이아웃 설정
 사용자에게 레이아웃 선호도를 입력받아 해당 선호도 기반 썸네일 레이아웃 설정 
(4) 제목 생성
키워드를 바탕으로 youtube_data_v3 API와 GPT API를 이용한 제목 생성 
(5) 제목 이미지 생성 
 (4)에서 생성한 제목과 사용자에게 입력받은 기존 채널의 특징을 반영하여 제목 이미지 생성 
(6) 썸네일 생성
 추출한 썸네일을 사용자의 선호도에 따른 레이아웃과 제목 이미지를 결합하여 최종 썸네일 생성 완료
```

<br>

<hr>
:four_leaf_clover: <strong>코드 구조</strong> <br>

```text
lab_finalcode.ipynb -> colab 환경에서 실행한 파일
lab_finalcode_for_local.ipynb -> 위 파일을 로컬에서 그대로 실행 가능
requirements.txt -> 필요한 라이브러리 목록
```
주의사항
1. .env 파일에 api key 설정해두기


<hr>
:four_leaf_clover: <strong>세부 사항</strong> <br>
                                                
1. <strong>문제 정의</strong> <br>
스마트폰과 같은 모바일 기기의 보급과 고속 인터넷 환경의 확산으로 인해 현대 사회의 사람들은 언제 어디서나 SNS를 통해 다양한 콘텐츠를 소비하고 소통할 수 있게 되었다. 그중에서도 유튜브(YouTube)는 세계 최대의 동영상 공유 플랫폼으로서, SNS 사용자들 사이에서 가장 높은 이용률을 보이고 있다. 이러한 
환경 속에서 유튜버들은 수익 창출을 위해 콘텐츠 제작뿐만 아니라, 조회수를 높이는 전략에도 많은 시간과 노력을 기울이고 있다. <br><br>
이에 따라 유튜브 영상의 조회수에 영향을 미치는 요소들의 중요성이 더욱 부각되고 있다. 썸네일 제작은 단순히 이미지를 선택하고 텍스트를 삽입하는 작업을 넘어, 영상의 핵심 내용을 효과적으로 전달하면서 시각적으로도 높은 주목도를 확보해야 하는 복합적인 과정이다. 이 과정에는 디자인 감각, 색채와 타이포그래피에 대한 이해, 영상의 메시지와 분위기를 빠르게 파악하는 능력, 그리고 다양한 디자인 툴을 다루는 기술 등 여러 전문적인 역량이 동시에 요구된다. 실제로 영상 제작 자체보다 썸네일 제작에 더 많은 시간과 에너지를 투입하는 크리에이터도 있으며, 이는 창작 활동의 효율성을 저해하고 피로도를 높이는 주요 원인 중 하나로 작용한다. 특히 유튜브와 같은 플랫폼에서는 썸네일이 영상의 클릭률(CTR)에 직접적인 영향을 미치기 때문에, 크리에이터는 더욱 완성도 높은 썸네일을 제작해야 한다는 압박을 지속적으로 받는다. 그러나 모든 크리에이터가 전문적인 디자인 역량을 갖추고 있지는 않으며, 반복적인 썸네일 제작 과정에서 창의성의 한계나 시간적 제약에 부딪히는 경우도 많다.<br><br>
기존의 썸네일 관련 연구와 상용화된 도구들은 이러한 문제를 근본적으로 해결하지 못하고 있다. 학계에서는 주로 영상 분류, 이미지 캡셔닝, 콘텐츠 추천 등 영상 및 이미지의 자동 분석과 분류에 초점을 맞춘 연구가 이루어져 왔으며, 썸네일 생성 자체를 자동화하는 연구는 아직 초기 단계에 머물러 있다. 상용 툴의 경우에도 대부분 사전에 정의된 템플릿을 기반으로 간단한 이미지 합성이나 텍스트 삽입 기능만을 제공할 뿐, 실제 영상의 내용과 맥락을 분석하여 썸네일에 반영하는 수준에는 미치지 못한다. 예를 들어, 일부 툴은 영상의 특정 프레임을 자동으로 추출하거나, 인기 있는 템플릿을 추천해주는 기능을 제공하지만, 이는 어디까지나 시각적 요소에 국한된 접근으로 영상의 스토리나 핵심 메시지, 크리에이터의 개성까지 반영하는 데에는 한계가 있다. <br><br>

2. <strong>제안 내용</strong> <br>
이에 비해 본 프로젝트는 영상 이해와 이미지 인식, 자연어 처리, 레이아웃 분석 등 최신 AI 기술을 통합적으로 적용하여, 영상의 언어적·시각적 정보를 모두 분석하고 이를 바탕으로 ‘의미 기반 자동 생성’ 방식의 썸네일 제작을 시도한다. 구체적으로, STT(음성 인식)를 통해 영상 속 대사를 텍스트로 변환하고, KeyBERT 또는 GPT 기반의 자연어 처리 기술로 핵심 키워드를 추출한다. 이어서 CLIP 등 멀티모달 AI를 활용해 텍스트와 이미지 정보를 결합하여 영상의 중요한 장면을 자동으로 선정하며, 사용자의 채널 특성과 선호도를 반영한 맞춤형 레이아웃을 구성한다. 마지막으로, 추출된 키워드와 영상의 맥락을 바탕으로 제목 이미지를 생성하고, 이를 통해 최종적으로 영상의 본질을 시각적으로 효과적으로 전달하는 썸네일을 자동 완성한다. 이처럼 본 프로젝트는 영상의 의미와 맥락, 크리에이터의 개성, 시청자의 주목도를 모두 고려하는 차별화된 접근을 통해, 기존 연구 및 상용 툴과는 본질적으로 다른 혁신을 실현하고자 한다. <br><br>

3. <strong>구현한 주요 기능</strong> <br>
(0) 개발 환경 및 환경설정 <br>
본 프로젝트는 Google Colab 환경에서 T4 GPU를 사용해 실행되며, 필요한 외부 
라이브러리를 Colab 셀 내에서 직접 설치한다. 또한 Google Drive 연동을 통해 
프로젝트 파일을 관리한다. <br>
주요 라이브러리는 다음과 같다: <br>
<strong>PySceneDetect:</strong> 장면 전환 감지 및 샘플링 프레임 추출 <br>
<strong>OpenAI Whisper:</strong> 음성 인식 (STT) 및 자막 추출 <br>
<strong>CLIP:</strong> 이미지-텍스트 임베딩 매칭을 통한 프레임 선택 <br>
<strong>cv2 (OpenCV):</strong> 프레임 이미지 처리 <br>
<strong>KeyBERT:</strong> 키워드 추출 <br>
<strong>OpenAI GPT API:</strong> 제목 생성 및 스타일 분석 <br>
<strong>yt_dlp:</strong> 유튜브 채널 데이터 추출 <br>
<strong>Pillow (PIL):</strong> 텍스트 이미지를 썸네일에 합성 <br><br>
(1) 사용자 입력 <br>
사용자에게 업로드할 본인의 영상(파일 경로)과 기존 사용자의 채널 주소(본인의 유튜브 채널 URL)를 입력받는다. 업로드할 영상은 25분 이내의 영상이어야 하며, 길이 초과 시 처리 중단되도록 설정했다. 사용자의 채널 주소는 채널의 레이아웃 스타일 및 폰트, 제목 스타일 등을 분석하기 위해 입력된다. <br><br>
(2) 영상 분석 <br>
a. <strong>is_video_within_25_minutes(filepath)</strong> <br>
 함수를 정의하여 동영상 길이 제한을 확인하는 기능을 구현했다. 시간을 나타내는 duration_sec 변수가 1500, 즉 25분 이하일 경우만 다음 프로세스로 넘어가도록 구현했다. <br>
b. <strong>get_scene_frames(filepath)</strong> <br>
 함수를 정의하여 scenedetect를 사용해 업로드된 영상의 프레임을 가져오는 기능을 구현했다. VideoManager와 SceneManager를 통해 영상 프레임을 가져오고 cv2기반 장면별 대표 프레임을 추출 후 저장한다. <br>
c. <strong>whisper_and_sentences(filepath)</strong> <br>
 함수를 정의하여 업로드된 영상 기반 STT를 적용하여 자막을 추출하고 가져온 Text에 대해 KeyBERT 또는 GPT API를 사용하여 키워드를 효과적으로 추출하는 기능을 구현했다. <br>
d. <strong>clip_best_per_sentence(frames, sentences)</strong> <br>
 함수를 정의하여 CLIP 모델을 활용해 주어진 영상의 프레임들과 텍스트 문장들 사이의 의미적 연관성을 
정량적으로 평가하고, 각 문장에 가장 적합한 프레임을 자동으로 추출하는 기능을 구현했다. 이 함수는 먼저, 입력으로 주어진 문장 리스트를 CLIP의 토크나이저를 통해 토큰화하고, 이를 텍스트 임베딩 벡터로 변환한다. 이후 함수는 각 문장별로 반복문을 돌며, 해당 문장에 대응하는 텍스트 임베딩과 비교할 프레임 후보군을 탐색한다. 각 문장에 대해 모든 프레임 후보와의 유사도를 계산하여, 가장 유사도가 높은 프레임을 해당 문장에 할당한다.  이 방식은 영상 내 다양한 장면 중에서 특정 문장(예를 들어, 영상 내에서 강조하고 싶은 주요 메시지나 설명)에 가장 어울리는 이미지를 자동으로 선별해낼 수 있다는 점에서 큰 장점이 있다. <br>
e. <strong>process(filepath)</strong> <br>
 함수를 정의하여 위 2,3,4 함수들을 차례로 실행하는 통합 프로세스를 구현했다. <br>
f. 최종적으로 main 함수에서 동영상 파일 경로를 사용자에게 입력받으면 is_video_within_25_minutes 함수 실행을 통해 25분이 초과하지 않을 경우 process 함수를 실행하도록 구현했다. <br><br>
(3) 썸네일 프레임 추출 및 레이아웃 설정 <br>
레이아웃을 설정하기 위해 사용자에게 분할 개수 1, 2, 4 중에 선택하도록 설정했다. 사용자의 선호에 따라 추출한 썸네일 중 해당하는 개수만큼 배치되도록 구현했다. get_positions(num_div) 함수를 정의하여 각 개수에 해당하는 프레임 분할과 프레임 배치를 위한 위치 좌표 생성을 구현했다. 총 6개의 썸네일 레이아웃을 생성 및 폴더에 저장하여 사용자가 가장 선호하는 썸네일을 최종 과정에서 선택할 수 있도록 구현했다. <br><br>
(4) 제목 생성 <br>
우선 앞서 함수 내에서 생성한 키워드 kws를 global 변수로 받아 사용하기 편리하도록 설정했다. 구글 클라우드 youtube_data_v3 API를 사용하여 입력받은 본인 채널 (또는 참고하고자 하는 유튜브 채널)의 uploads playlist ID를 가져오고, 이 playlist에서 최근 영상 4개의 제목을 가져오도록 하는 코드를 구현했다. 이어서 GPT API를 활용하여 앞서 가져온 해당 영상 4개의 제목의 스타일을 참고하여 kws의 
키워드들을 조합한 새로운 제목을 생성하도록 지시했다. <br><br>
(5) 제목 이미지 생성 <br>
기존 채널의 특징을 분석하여 해당 폰트를 다운 받고, font_size, font_color, outline_color, coutline_width, letter_spacing 등을 설정했다. 또한 배경 색상, 그림자 여부 등을 분석하여 위에서 생성한 제목을 이미지로 생성했다. 본 프로젝트에서는 유튜브 채널이 미리 생성되어 있지 않았으므로 이미 존재하는 총 세가지 채널의 스타일을 반영했다. 다양한 나이대의 다양한 스타일을 반영하기 위해 ‘할명수’, ‘찰스엔터’, ‘토모토모’ 등의 채널을 활용했으며, 실제 사용자가 사용할 때는 본인의 채널을 입력하기를 추천한다. <br><br>
(6) 썸네일 생성 <br>
show_image_grid() 함수를 정의하여 위에서 생성한 여섯 개의 썸네일 레이아웃과 제목 이미지 후보 중 각각 한 개씩을 사용자에게 입력받도록 구현했다. 사용자가 번호를 입력하면 해당 번호의 썸네일과 제목이 선택된다. 선택된 썸네일 레이아웃 위에 제목 이미지가 첨부되며, 설정한 경로에 최종적으로 생성된 썸네일 이미지가 저장된다. <br><br>


5. <strong>기대효과 및 의의</strong> <br>
a. 크리에이터의 제작 부담 경감 및 효율성 향상 <br>
본 프로젝트는 썸네일 제작 과정의 자동화를 통해 크리에이터가 직접 디자인을 고민하고 반복적으로 시도하는 시간과 노력을 크게 줄여준다. 기존에는 디자인 감각, 툴 활용 능력, 영상 이해 등 복합적 역량이 요구되어 진입장벽이 높았으나, AI 기반 자동화 시스템 도입으로 누구나 손쉽게 고품질 썸네일을 제작할 수 있다. 이는 크리에이터가 본연의 콘텐츠 기획과 제작에 더 많은 역량을 집중할 수 있도록 돕는다. <br><br>
b. 썸네일 품질의 일관성 및 최적화 <br>
영상 내용 분석, 키워드 추출, 레이아웃 자동 생성 등 체계적인 AI 프로세스를 통해 썸네일의 시각적 완성도와 주제 적합성을 동시에 확보할 수 있다. 사용자의 채널 스타일을 분석하여 폰트, 색상, 레이아웃 등을 자동 반영함으로써, 채널의 브랜딩 일관성을 유지하면서도 각 영상에 최적화된 썸네일을 제공한다. <br><br>
c. 조회수 및 시청자 반응 극대화 <br>
썸네일은 영상의 첫인상을 결정짓는 핵심 요소로, 시청자의 클릭을 유도하는 데 직접적인 영향을 미친다. 본 시스템은 키워드와 장면 분석을 통해 영상의 핵심 메시지와 시각적 임팩트를 모두 반영한 썸네일을 자동 생성함으로써, 조회수 상승과 시청자 유입 효과를 극대화할 수 있다. 이는 크리에이터의 수익 증대와 채널 성장에 실질적인 기여를 한다.  <br><br>
d. 크리에이터 생태계의 진입장벽 완화 및 다양성 확대  <br>
디자인 역량이나 고가의 툴 없이도 누구나 손쉽게 고품질 썸네일을 제작할 수 있게 됨으로써, 신규 크리에이터의 진입장벽이 낮아지고, 다양한 배경의 창작자들이 유튜브 생태계에 참여할 수 있다. 이는 콘텐츠 시장의 다양성과 창의성 확장에 긍정적으로 기여한다.  <br><br>



